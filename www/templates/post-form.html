{{ extends "/layout.html" }}

{{ define "content" }}

<section class="section">
    <div class="container">
            {{ .Post.Body }}
        <form method="POST">
            
            <div class="field">
                <label class="label">Title</label>
                <div class="control">
                    <input name="PostTitle" class="input" type="text" placeholder="" value="{{ .Post.Title }}">
                </div>
            </div>
            
            <div class="field">
                <label class="label">Slug</label>
                <div class="control">
                    <input name="PostSlug" class="input" type="text" placeholder="" value="{{ .Post.Path }}">
                </div>
            </div>
            
            <div class="field">
                <div class="control">
                    <!--<textarea id="editor" name="PostBody" class="textarea" placeholder="">{{ .Post.Body }}</textarea>-->
                    <div id="editor">{{ .Post.Body }}</div>
                    <input name="PostBody" type="hidden">
                </div>
            </div>
            
            <div class="field is-grouped">
                <div class="control">
                    <button type="submit" class="button is-link">Save</button>
                </div>
                <div class="control">
                    <a class="button is-text" href="/admin">Cancel</a>
                </div>
            </div>
        </form>
    </div>
</section>

{{ end }}

{{ define "head" }}
<link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
{{ end }}

{{ define "scripts" }}
<script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>
<script>
    var quill = new Quill('#editor', {
        theme: 'snow'
    });
    
    var form = document.querySelector('form');
    form.onsubmit = function () {
        var hiddenPostBody = document.querySelector('input[name=PostBody]');
        hiddenPostBody.value = quill.root.innerHTML;
        return true;
    }
</script>
{{ end }}